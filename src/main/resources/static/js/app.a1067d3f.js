(function(){"use strict";var e={9661:function(e,r,t){var o=t(9242),a=t(3396);const l=(0,a.uE)('<header><div class="navbar navbar-dark bg-dark shadow-sm"><div class="container"><a href="#" class="navbar-brand d-flex align-items-center"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="me-2" viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg><strong>Elevator Manager Simple UI</strong></a></div></div></header>',1),n=(0,a.uE)('<footer class="text-muted py-5"><div class="container"><p class="float-end mb-1"><a href="#">Back to top</a></p><p class="mb-1">Simple UI For Elevator Manager!</p></div></footer>',1);function s(e,r,t,o,s,i){const c=(0,a.up)("HomeComponent");return(0,a.wg)(),(0,a.iD)(a.HY,null,[l,(0,a.Wm)(c),n],64)}var i=t(7139);const c=e=>((0,a.dD)("data-v-ae2b53e4"),e=e(),(0,a.Cn)(),e),u={key:0,class:"loader full-viewport-size"},v=c((()=>(0,a._)("img",{src:"https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif",alt:"loader"},null,-1))),d=[v],f={key:1,class:"full-viewport-size"},p={class:"album py-5 bg-light"},g={class:"container"},h={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"};function m(e,r,t,o,l,n){const s=(0,a.up)("ElevatorCard");return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.loading?((0,a.wg)(),(0,a.iD)("div",u,d)):e.error_message?((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("h3",null,(0,i.zw)(e.error_message),1)])):(0,a.kq)("",!0),(0,a._)("main",null,[(0,a._)("div",p,[(0,a._)("div",g,[(0,a._)("div",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.elevators,(e=>((0,a.wg)(),(0,a.j4)(s,{key:e.id,elevator:e},null,8,["elevator"])))),128))])])])])],64)}var _=t(2482),b=t(6265),E=t.n(b);class w{constructor(){(0,_.Z)(this,"id",-1),(0,_.Z)(this,"elevatorTag",0),(0,_.Z)(this,"floor",0),(0,_.Z)(this,"state","stationary"),(0,_.Z)(this,"direction","none"),(0,_.Z)(this,"doorState","closed")}mapFromModel(e){this.id=e.id,this.elevatorTag=e.elevatorTag,this.direction=e.direction,this.floor=e.floor,this.state=e.state,this.doorState=e.doorState}}var y=t(4410),S=t.n(y),C=Object.freeze({BACKEND_BASE_URL:"http://localhost:8081/api",BACKEND_BASE_REST_URL_VERSION:"/v1",PUSHER_APP_KEY:"8c93f1947849a092d5f4",PUSHER_CLUSTER:"ap2",PUSHER_CHANNEL:"elevator-movements",PUSHER_EVENT_PREFIX:"elevator-"}),k=t(4870);class H{constructor(){(0,_.Z)(this,"pusher",null),(0,_.Z)(this,"pusherChannel",null),this.pusher=new(S())(C.PUSHER_APP_KEY,{cluster:C.PUSHER_CLUSTER}),this.pusherChannel=this.pusher.subscribe("elevator-movements"),console.log("pusher configured",this.pusher)}async getElevators(){const e=await E().get(C.BACKEND_BASE_URL+C.BACKEND_BASE_REST_URL_VERSION+"/elevators"),r=e.data;if(null==r.data)return[];const t=r.data.map((e=>{const r=new w;return r.mapFromModel(e),(0,k.iH)(r)}));return t.forEach((e=>{this.subscribeToPusherEvents(e)})),t}subscribeToPusherEvents(e){console.log("bound to events :","elevator-"+e.value.elevatorTag),this.pusherChannel.bind("elevator-"+e.value.elevatorTag,(r=>{console.log("Elevator event: ",r),e.value.mapFromModel(r)}))}async callElevator(e,r){const t=await E().post(C.BACKEND_BASE_URL+C.BACKEND_BASE_REST_URL_VERSION+"/call-elevator",{elevatorId:e,floorNumber:r});return t.data}}var R=new H;const U={class:"col"},T={class:"card shadow-sm"},N={class:"card-header"},O={class:"card-body"},P={class:"list-group list-group-flush text-start"},A={class:"list-group-item"},D=(0,a._)("span",{class:"badge bg-secondary"},"Floor",-1),j={class:"list-group-item"},B=(0,a._)("span",{class:"badge bg-secondary"},"State",-1),x={class:"list-group-item"},Z=(0,a._)("span",{class:"badge bg-secondary"},"DoorState",-1),z={class:"list-group-item"},I=(0,a._)("span",{class:"badge bg-secondary"},"Direction",-1),M={class:"card-footer"},K={class:"row d-flex justify-content-around align-items-center"},L={class:"col-auto"},F=(0,a._)("label",{for:"floorNumber",class:"col-form-label"},"Floor calling from",-1);function V(e,r,t,l,n,s){return(0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("div",T,[(0,a._)("div",N,"Elevator "+(0,i.zw)(e.elevator.value.elevatorTag),1),(0,a._)("div",O,[(0,a._)("ul",P,[(0,a._)("li",A,[D,(0,a.Uk)(" "+(0,i.zw)(e.elevator.value.floor),1)]),(0,a._)("li",j,[B,(0,a.Uk)(" "+(0,i.zw)(e.elevator.value.state),1)]),(0,a._)("li",x,[Z,(0,a.Uk)(" "+(0,i.zw)(e.elevator.value.doorState),1)]),(0,a._)("li",z,[I,(0,a.Uk)(" "+(0,i.zw)(e.elevator.value.direction),1)])])]),(0,a._)("div",M,[(0,a._)("div",K,[(0,a._)("div",L,[F,(0,a.wy)((0,a._)("input",{type:"text",id:"floorNumber",class:"form-control","aria-describedby":"passwordHelpInline","onUpdate:modelValue":r[0]||(r[0]=r=>e.floorNumber=r)},null,512),[[o.nr,e.floorNumber]])]),(0,a._)("button",{type:"button",class:"btn btn-primary col-auto",onClick:r[1]||(r[1]=(...r)=>e.callElevator&&e.callElevator(...r))},"Call Elevator")])])])])}var Y=(0,a.aZ)({name:"ElevatorCard",props:["elevator"],setup(e){const r=(0,k.iH)(0),t=(0,k.iH)(!1),o=(0,k.iH)(null),a=async()=>{t.value=!0;const a=await R.callElevator(e.elevator.value.elevatorTag,r.value);t.value=!1,a.data&&(o.value=a.errorMessage)};return{loading:t,error_message:o,callElevator:a,floorNumber:r}}}),X=t(89);const q=(0,X.Z)(Y,[["render",V]]);var W=q,G=(0,a.aZ)({name:"HomeComponent",components:{ElevatorCard:W},props:{msg:String},setup(){const e=(0,k.XI)(0),r=(0,k.iH)(!1),t=(0,k.iH)(null);return(0,a.bv)((async()=>{r.value=!0,e.value=await R.getElevators(),r.value=!1})),{elevators:e,loading:r,error_message:t}}});const J=(0,X.Z)(G,[["render",m],["__scopeId","data-v-ae2b53e4"]]);var Q=J,$={name:"App",components:{HomeComponent:Q}};const ee=(0,X.Z)($,[["render",s]]);var re=ee;t(2166);(0,o.ri)(re).mount("#app")}},r={};function t(o){var a=r[o];if(void 0!==a)return a.exports;var l=r[o]={exports:{}};return e[o](l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(r,o,a,l){if(!o){var n=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],l=e[u][2];for(var s=!0,i=0;i<o.length;i++)(!1&l||n>=l)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(s=!1,l<n&&(n=l));if(s){e.splice(u--,1);var c=a();void 0!==c&&(r=c)}}return r}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[o,a,l]}}(),function(){t.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(r,{a:r}),r}}(),function(){t.d=function(e,r){for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};t.O.j=function(r){return 0===e[r]};var r=function(r,o){var a,l,n=o[0],s=o[1],i=o[2],c=0;if(n.some((function(r){return 0!==e[r]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(i)var u=i(t)}for(r&&r(o);c<n.length;c++)l=n[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},o=self["webpackChunkelevator_manager_frontend"]=self["webpackChunkelevator_manager_frontend"]||[];o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(9661)}));o=t.O(o)})();
//# sourceMappingURL=app.a1067d3f.js.map